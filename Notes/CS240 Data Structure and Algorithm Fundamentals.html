<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>CS240 Data Structures and Algorithm Fundametals Notes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/clipboard/clipboard.min.js"></script>
<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/quarto.js"></script>
<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/popper.min.js"></script>
<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/anchor.min.js"></script>
<link href="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="CS240 Data Structure and Algorithm Fundamentals_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="CS240 Data Structure and Algorithm Fundamentals_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="CS240 Data Structure and Algorithm Fundamentals_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="CS240 Data Structure and Algorithm Fundamentals_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CS240 Data Structures and Algorithm Fundametals Notes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="general-information" class="level1">
<h1>General Information</h1>
<ul>
<li><p>Instructor: Darrel Criss</p>
<p>Office: Baker Hall 123</p></li>
<li><p>Class meets from 3:30-4:50, Monday, Tuesday, Wednesday. Baker Hall 115</p></li>
<li><p>Office Hours: By Appointment or Thursdays from 12:00pm-1:00pm.</p></li>
<li><p>Homeworks will be due Tuesdays at midnight</p></li>
</ul>
</section>
<section id="course-notes" class="level1">
<h1>Course Notes</h1>
<section id="april-2-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-2-2024">April 2, 2024</h3>
<p>We wnet over the basics of the course as well as talked about rules for Using ChatGPT.</p>
</section>
<section id="april-3-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-3-2024">April 3, 2024</h3>
<p>Again went over the basics and the course structure. A little bit of repetition as some of the class was not there on Tuesday April 2. Talked with Prof after class to ask about graduate certifficate vs Graduate degree as well as talked a little about AI.</p>
</section>
<section id="april-4-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-4-2024">April 4, 2024</h3>
<p>Lab Day, Going to work on homework and figuring out how python works. Hoping to transition to quarto vs.&nbsp;Rmarkdown.</p>
<ul>
<li>Standups
<ul>
<li>A chance to show off some of your code</li>
<li>Show off your aproach to solving the problem / build the prject</li>
<li>technical description of the solution</li>
<li>What we are happy with</li>
<li>What you would like to improve later</li>
</ul></li>
<li>Code Review
<ul>
<li>Be Polite and professional</li>
<li>Review of syntax</li>
<li>Evaluation of any edge cases missed</li>
<li>Notes if you approached it in a different way, used a different library</li>
</ul></li>
<li>To DO:
<ul>
<li>Finish introductions - include a picture</li>
<li>Finish Readings</li>
<li>Finish Algorithms Assignment 1</li>
</ul></li>
</ul>
<section id="algorithms-assignment-1" class="level6">
<h6 class="anchored" data-anchor-id="algorithms-assignment-1">Algorithms Assignment 1</h6>
<ul>
<li>Searching: There are two types of searches
<ul>
<li>Linear Search: Fast when few items, <span class="math inline">\(O(n)\)</span>. Slow when large items. Does not require sorted array.</li>
<li>Binary Search: About the same speed as Linear when there are few items, requires sorted array. Good with lots of items. <span class="math inline">\(O(\log_2(n))\)</span>.</li>
</ul></li>
</ul>
<p>Binary Search and Time Complexity</p>
<p>For the first question, we are writing pseudocode to write an alogrithm for performing the binary search across an Array.</p>
<ul>
<li><p>Small Note on O-Notation:</p>
<ul>
<li><span class="math inline">\(O(1)\)</span> would be an example of an array like adding a value to an array, something in memory that is unchanging. Fairly Fast.</li>
<li><span class="math inline">\(O(log_2(n))\)</span> Is an example of Binary Search Trees. Fairly fast, as n increases, gets large slower and slower.</li>
<li><span class="math inline">\(O(n^2)\)</span> Gets slow very fast.</li>
</ul></li>
<li><p>In more general:</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;"><span class="math inline">\(\#\)</span> Items to search</th>
<th style="text-align: center;"><span class="math inline">\(\#\)</span> Number searches using BST</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1 K</td>
<td style="text-align: center;">10</td>
</tr>
<tr class="even">
<td style="text-align: center;">1Meg</td>
<td style="text-align: center;">20</td>
</tr>
<tr class="odd">
<td style="text-align: center;">1Gig</td>
<td style="text-align: center;">30</td>
</tr>
<tr class="even">
<td style="text-align: center;">1 Tera</td>
<td style="text-align: center;">40</td>
</tr>
</tbody>
</table></li>
</ul>
<p>Big Oh Notation: <span class="math inline">\(O(n)\)</span> where <span class="math inline">\(n\)</span> usually refers to the size of the input or the number of elements in the input. The function <span class="math inline">\(O(f(n))\)</span> tells us the number of operations that some function of the number of elements <span class="math inline">\(n\)</span>, <span class="math inline">\(f(n)\)</span> will take. This is not very mathematically rigorous because we usually drop constants in front of <span class="math inline">\(n\)</span> (number of elements). Computation time.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Name</th>
<th style="text-align: center;">Notation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Linear Time</td>
<td style="text-align: center;"><span class="math inline">\(O(n)\)</span></td>
</tr>
<tr class="even">
<td style="text-align: center;">Constant Time</td>
<td style="text-align: center;"><span class="math inline">\(O(1)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: center;">Quadratic Time</td>
<td style="text-align: center;"><span class="math inline">\(O(n^2)\)</span></td>
</tr>
</tbody>
</table>
<ul>
<li>How to find the Time complexity of a given function of <span class="math inline">\(n\)</span>:
<ol type="1">
<li>Find the fastest growing term.</li>
<li>Take out the coefficeint.</li>
</ol></li>
</ul>
<p><span class="math inline">\(T=an+b = O(n)\)</span>, here <span class="math inline">\(an&gt;b\)</span> because <span class="math inline">\(b\)</span> is constant.</p>
<p><span class="math inline">\(T=cn^2+dn+e=O(n^2)\)</span>, here <span class="math inline">\(cn^2&gt;dn&gt;e\)</span> (graph them itll make more sense)</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="CS240-Data-Structure-and-Algorithm-Fundamentals_files/figure-html/graph%20visualization%20thing-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="april-8-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-8-2024">April 8, 2024</h3>
<ul>
<li>To Do:
<ul>
<li>Algorithms Homework 1</li>
<li>Standups
<ul>
<li>Take a piece of your code, present it to the class. Feel free to respond to peopleâ€™s code.</li>
<li>Wednesday, Code reviews</li>
</ul></li>
</ul></li>
</ul>
<section id="notes-chapter-2-selection-sort" class="level5">
<h5 class="anchored" data-anchor-id="notes-chapter-2-selection-sort">Notes Chapter 2: Selection Sort</h5>
<p>Selection Sort:</p>
<ol type="1">
<li>Start with teh entire list as the unsorted sublist.</li>
<li>Find the smallest element in the unsorted sublist.</li>
<li>Swap the smallest elemet with the first element of the unsorted sublist, thus adding it to the sorted siublist.</li>
<li>Now consider the remaining unsorted sublist ( Excluding the first element, which is now part of the sorted sublist), nd repeated steps 2 and 2 until the entire list is sorted.</li>
</ol>
<ul>
<li>Has a time complexity of <span class="math inline">\(O(n^2)\)</span>.</li>
</ul>
<section id="sorting" class="level6">
<h6 class="anchored" data-anchor-id="sorting">Sorting</h6>
<p>Types of sarch, Linear search and Binary Search. Binary search is faster than linear search given than an array is sorted. So to be able to do binary search we need to sort the array first. Linear search is good if there are not too many items, but if theres a lot of items it will take a long time.</p>
<ul>
<li><p>When do you sort the array?</p>
<ul>
<li>I would say right at the beginning before you search, sometimes you cannot sort data at a time when it is not being utilized.</li>
<li>The more time you let run between sorting data, the longer it will take to sort because of the shear size of the data</li>
<li>Sometimes we want to sort the data multiple times throughout the day to lessen the time it takes.</li>
<li>Depending on the type of the data.</li>
</ul></li>
<li><p>For the algorithms assignement:</p>
<ul>
<li>Selection Sort</li>
<li>Insertion Sort
<ul>
<li>Looking for Pseudo Code and <span class="math inline">\(O\)</span> notation.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="data-structures" class="level5">
<h5 class="anchored" data-anchor-id="data-structures">Data Structures:</h5>
<section id="linked-lists" class="level6">
<h6 class="anchored" data-anchor-id="linked-lists">Linked Lists</h6>
<pre><code>Linked Lists vs. Array:</code></pre>
<ul>
<li>Linked lists
<ul>
<li>Can add and remove elements as we go. Size is adjustable as we go.</li>
<li>Single Linked lists
<ul>
<li>Data
<ul>
<li>Node
<ul>
<li>Data
<ul>
<li>Node
<ul>
<li>Data
<ul>
<li>Null</li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
</ul></li>
<li>For example Microsoft word. each word is its own linked list. can easily insert, add, delete words. We keep adding/deleting/editing nodes.</li>
<li>Single linked lists can only go in one direction.</li>
</ul></li>
<li>Double Linked Lists
<ul>
<li>Similar to a single linked list, but data has nodes on both sides so that it you can go multiple directions.</li>
<li>Downside: More maintainence. A little slower than a single linked list, but still very fast.</li>
<li>Can be good for sending a packet tracer back and forth.</li>
</ul></li>
<li>Circular Linked List
<ul>
<li>Similar to double linked lists where the Previous node for the first node goes to the next of the last node and vice versa.</li>
<li>How the fuck am I gonna get this program, running :((((((((</li>
<li>Implementing a circular linked list for extra credit on the linked lists data structures assignment.</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="arrays" class="level6">
<h6 class="anchored" data-anchor-id="arrays">Arrays</h6>
<p>Arrays have a set size, we define the size, more efficient, faster. For reading an array <span class="math inline">\(O(1)\)</span>. Searching in an array linearly, <span class="math inline">\(O(\frac{n}{2})=O(n)\)</span></p>
<p>Downside/disadvantages of an Array: - Array has a fixed size, cannot add elements to the array. - Size not adjustable</p>
</section>
</section>
</section>
<section id="april-9-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-9-2024">April 9, 2024</h3>
<section id="to-do" class="level6">
<h6 class="anchored" data-anchor-id="to-do">TO DO</h6>
<ul>
<li>Readings</li>
<li>Data structures Assignment 1</li>
<li>Algorithms Assignment 2</li>
<li>Upload binary search function for standups.</li>
</ul>
</section>
<section id="strategies-for-tackling-homework-problems" class="level5">
<h5 class="anchored" data-anchor-id="strategies-for-tackling-homework-problems">Strategies for tackling homework problems</h5>
<ul>
<li>For Code
<ul>
<li>Old Code that has been written</li>
<li>ChatGPT for brainstorming</li>
<li>w3 schools - for learning stuff</li>
</ul></li>
<li>Time Complexity
<ul>
<li>bigocheatsheet.com</li>
<li>Space vs.&nbsp;Time Complexity
<ul>
<li>Time - How long will it take</li>
<li>Space - how much storage does it use</li>
</ul></li>
<li>Reddit learnprogramming Data Structures and Algorithms cheat sheets</li>
<li>Princeton university algorithms and data structures cheatsheets - Good Resource</li>
<li>Interviewcake.com data structures reference
<ul>
<li>https://www.interviewcake.com/data-structures-reference</li>
</ul></li>
</ul></li>
</ul>
<p>What are resources for? They are for helping your learning, Start saving websites and videos that are the most helpful for you.</p>
</section>
</section>
<section id="april-10-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-10-2024">April 10, 2024</h3>
<ul>
<li>Quick Python Note, integers are of class <code>'int'</code> while real numbers are of class <code>'float'</code>.</li>
</ul>
<section id="standups" class="level4">
<h4 class="anchored" data-anchor-id="standups">Standups</h4>
<p>Presented my code, somewhat interesting, im still a little lost on what we are supposed to be doing during class time.</p>
</section>
</section>
<section id="april-15-2024" class="level3">
<h3 class="anchored" data-anchor-id="april-15-2024">April 15, 2024</h3>
<section id="iteration-versus-recursion" class="level4">
<h4 class="anchored" data-anchor-id="iteration-versus-recursion">Iteration versus recursion</h4>
<ul>
<li><p>Iteration, we are <strong>iterating</strong> through a loop.</p></li>
<li><p>with recursion, we keep calling a recursive function. elegent and more compact compared to iteration, but it is more memory intensive than iteration. Also slow, in business we donâ€™t like slow, we like fast and efficient.</p>
<ul>
<li>Not used too much, mostly industry uses iteration.</li>
<li>Exception, want to do something like a mapping routine. robot finding a route through a maze. Used in google maps.</li>
</ul></li>
</ul>
</section>
</section>
<section id="notes-that-are-not-assigned-to-any-date" class="level3">
<h3 class="anchored" data-anchor-id="notes-that-are-not-assigned-to-any-date">Notes that Are not assigned to any date:</h3>
<p>Merge sory kinda happens when we have lots of data that needs to be sorted or we canâ€™t spend the whole time sorting things, like databases needing to sort customer data. When they refer to sorting in the algorithm, it is the act of breaking the array into sub-arrays with length 1, when the arrays are length 1 they are inherently sorted. The real piece that is doing the work is the merging aspect which merges all the sub arrays together in sorted order.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>